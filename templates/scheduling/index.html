{% extends "base.html" %}
{% block title %}Schedule | Ennytime{% endblock title %}
{% block content %}
<div class="wrapper--small schedule__wrapper">
    <h1 class="sr-only">Scheduling</h1>
    {% if shifts|length == 0 %}
    <p class="schedule__explanation">You have no shifts. <a href="/shifts/new" class="link">Create your first shift.</a></p>
    {% else %}
    {% include "scheduling/fragments/scheduling-controls.html" %}
    <p class="schedule__explanation">Click the buttons to quickly add shifts to your calendar. Click again to remove them from your calendar.</p>
    <ul class="js-schedule" data-js-schedule>
        {% for key, date in month_calendar.items() %}
        <li class="schedule-list__item">
            <p class="schedule-day__heading">
                <span>{{date.strftime("%A")}}</span>
                <span class="schedule-day__date">({{date.strftime("%B")}} {{date.day}})</span>
            </p>
            <div class="schedule-button__wrapper">
                    {% for shift in shifts %}
                        {% if commitments.get(date.strftime("%Y-%m-%d"), {}).get(shift.id) %}
                            {% set commitment = commitments[date.strftime("%Y-%m-%d")][shift.id] %}
                            {% include "/scheduling/fragments/shift-exists-button.html" %}
                        {% else %}
                            {% include "/scheduling/fragments/no-shift-button.html" %}
                        {% endif %}
                    {% endfor %}
            </div>
        </li>
        <br>
        <hr class="divider">
        <br>
        {% endfor %}
    </ul>
    {% endif %}
</div>
{% endblock content %}